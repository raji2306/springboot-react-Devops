version : '3.9'
services : 
  spring-boot :
    image : raji2306/spring-boot
    port : 
    - "8080 : 8080"
    restart : always 
    depends_on :
    - mysql
    - react-app
    networks :
    - mine 
    environment :
    deploy:
        resources:
            limits:
              cpus: 0.50
              memory: 512M
            reservations:
              cpus: 0.25
              memory: 128M
  react-app :
    image : raji2306/react-app
    port :
    - "3000: 3000"
    restart : always
    depends_on : 
    - mysql 
    networks : 
    - mine 
    deploy:
        resources:
            limits:
              cpus: 0.50
              memory: 512M
            reservations:
              cpus: 0.25
              memory: 128M
  mysql :
    image: raji2306/database
    restart: always
    command: --default-authentication-plugin=mysql_native_password
    environment:
      - MYSQL_USER=raji
      - MYSQL_PASSWORD=raji123*
      - MYSQL_ROOT_PASSWORD=raji123*
      - MYSQL_DATABASE=devops
    ports:
      - "3306:3306"
    volumes:
    - mysql-data:/var/lib/mysql
    networks:
      - mine
networks :
    mine :
      driver : bridge
    
